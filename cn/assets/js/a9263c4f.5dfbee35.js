"use strict";(self.webpackChunkgo_zero=self.webpackChunkgo_zero||[]).push([[3255],{3905:function(e,n,t){t.d(n,{Zo:function(){return s},kt:function(){return u}});var r=t(7294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function p(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function o(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var c=r.createContext({}),l=function(e){var n=r.useContext(c),t=n;return e&&(t="function"==typeof e?e(n):p(p({},n),e)),t},s=function(e){var n=l(e.components);return r.createElement(c.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},m=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,i=e.originalType,c=e.parentName,s=o(e,["components","mdxType","originalType","parentName"]),m=l(t),u=a,g=m["".concat(c,".").concat(u)]||m[u]||d[u]||i;return t?r.createElement(g,p(p({ref:n},s),{},{components:t})):r.createElement(g,p({ref:n},s))}));function u(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var i=t.length,p=new Array(i);p[0]=m;var o={};for(var c in n)hasOwnProperty.call(n,c)&&(o[c]=n[c]);o.originalType=e,o.mdxType="string"==typeof e?e:a,p[1]=o;for(var l=2;l<i;l++)p[l]=t[l];return r.createElement.apply(null,p)}return r.createElement.apply(null,t)}m.displayName="MDXCreateElement"},3476:function(e,n,t){t.r(n),t.d(n,{default:function(){return d},frontMatter:function(){return o},metadata:function(){return c},toc:function(){return l}});var r=t(7462),a=t(3366),i=(t(7294),t(3905)),p=["components"],o={},c={unversionedId:"deployment/trace",id:"deployment/trace",isDocsHomePage:!1,title:"go-zero\u94fe\u8def\u8ffd\u8e2a",description:"\u5e8f\u8a00",source:"@site/i18n/cn/docusaurus-plugin-content-docs/current/deployment/trace.md",sourceDirName:"deployment",slug:"/deployment/trace",permalink:"/cn/docs/deployment/trace",editUrl:"https://github.com/zeromicro/portal/edit/main/i18n/cn/docusaurus-plugin-content-docs/current/deployment/trace.md",version:"current",lastUpdatedAt:1653044750,formattedLastUpdatedAt:"5/20/2022",frontMatter:{},sidebar:"docs",previous:{title:"\u670d\u52a1\u76d1\u63a7",permalink:"/cn/docs/deployment/service-monitor"},next:{title:"\u5e38\u89c1\u95ee\u9898",permalink:"/cn/docs/faq/troubleshooting"}},l=[{value:"\u5e8f\u8a00",id:"\u5e8f\u8a00",children:[]},{value:"\u4ee3\u7801\u7ed3\u6784",id:"\u4ee3\u7801\u7ed3\u6784",children:[]},{value:"\u6982\u5ff5",id:"\u6982\u5ff5",children:[{value:"SpanContext",id:"spancontext",children:[]},{value:"Span",id:"span",children:[]}]},{value:"\u5b9e\u4f8b\u5e94\u7528",id:"\u5b9e\u4f8b\u5e94\u7528",children:[{value:"HTTP",id:"http",children:[]},{value:"RPC",id:"rpc",children:[]}]},{value:"\u603b\u7ed3",id:"\u603b\u7ed3",children:[]},{value:"\u53c2\u8003",id:"\u53c2\u8003",children:[]}],s={toc:l};function d(e){var n=e.components,t=(0,a.Z)(e,p);return(0,i.kt)("wrapper",(0,r.Z)({},s,t,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("h2",{id:"\u5e8f\u8a00"},"\u5e8f\u8a00"),(0,i.kt)("p",null,"\u5fae\u670d\u52a1\u67b6\u6784\u4e2d\uff0c\u8c03\u7528\u94fe\u53ef\u80fd\u5f88\u6f2b\u957f\uff0c\u4ece ",(0,i.kt)("inlineCode",{parentName:"p"},"http")," \u5230 ",(0,i.kt)("inlineCode",{parentName:"p"},"rpc")," \uff0c\u53c8\u4ece ",(0,i.kt)("inlineCode",{parentName:"p"},"rpc")," \u5230 ",(0,i.kt)("inlineCode",{parentName:"p"},"http")," \u3002\u800c\u5f00\u53d1\u8005\u60f3\u4e86\u89e3\u6bcf\u4e2a\u73af\u8282\u7684\u8c03\u7528\u60c5\u51b5\u53ca\u6027\u80fd\uff0c\u6700\u4f73\u65b9\u6848\u5c31\u662f ",(0,i.kt)("strong",{parentName:"p"},"\u5168\u94fe\u8def\u8ddf\u8e2a"),"\u3002"),(0,i.kt)("p",null,"\u8ffd\u8e2a\u7684\u65b9\u6cd5\u5c31\u662f\u5728\u4e00\u4e2a\u8bf7\u6c42\u5f00\u59cb\u65f6\u751f\u6210\u4e00\u4e2a\u81ea\u5df1\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"spanID")," \uff0c\u968f\u7740\u6574\u4e2a\u8bf7\u6c42\u94fe\u8def\u4f20\u4e0b\u53bb\u3002\u6211\u4eec\u5219\u901a\u8fc7\u8fd9\u4e2a ",(0,i.kt)("inlineCode",{parentName:"p"},"spanID")," \u67e5\u770b\u6574\u4e2a\u94fe\u8def\u7684\u60c5\u51b5\u548c\u6027\u80fd\u95ee\u9898\u3002"),(0,i.kt)("p",null,"\u4e0b\u9762\u6765\u770b\u770b ",(0,i.kt)("inlineCode",{parentName:"p"},"go-zero")," \u7684\u94fe\u8def\u5b9e\u73b0\u3002"),(0,i.kt)("h2",{id:"\u4ee3\u7801\u7ed3\u6784"},"\u4ee3\u7801\u7ed3\u6784"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/zeromicro/go-zero/blob/master/core/trace/spancontext.go"},"spancontext")," \uff1a\u4fdd\u5b58\u94fe\u8def\u7684\u4e0a\u4e0b\u6587\u4fe1\u606f\u300ctraceid\uff0cspanid\uff0c\u6216\u8005\u662f\u5176\u4ed6\u60f3\u8981\u4f20\u9012\u7684\u5185\u5bb9\u300d"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/zeromicro/go-zero/blob/master/core/trace/span.go"},"span")," \uff1a\u94fe\u8def\u4e2d\u7684\u4e00\u4e2a\u64cd\u4f5c\uff0c\u5b58\u50a8\u65f6\u95f4\u548c\u67d0\u4e9b\u4fe1\u606f"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/zeromicro/go-zero/blob/master/core/trace/propagator.go"},"propagator")," \uff1a ",(0,i.kt)("inlineCode",{parentName:"li"},"trace")," \u4f20\u64ad\u4e0b\u6e38\u7684\u64cd\u4f5c\u300c\u62bd\u53d6\uff0c\u6ce8\u5165\u300d"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/zeromicro/go-zero/blob/master/core/trace/noop.go"},"noop")," \uff1a\u5b9e\u73b0\u4e86\u7a7a\u7684 ",(0,i.kt)("inlineCode",{parentName:"li"},"tracer")," \u5b9e\u73b0")),(0,i.kt)("p",null,(0,i.kt)("img",{parentName:"p",src:"https://static.gocn.vip/photo/2020/2f244477-4ed3-4ad1-8003-ff82cbe2f8a0.png?x-oss-process=image/resize,w_1920",alt:null})),(0,i.kt)("h2",{id:"\u6982\u5ff5"},"\u6982\u5ff5"),(0,i.kt)("h3",{id:"spancontext"},"SpanContext"),(0,i.kt)("p",null,"\u5728\u4ecb\u7ecd ",(0,i.kt)("inlineCode",{parentName:"p"},"span")," \u4e4b\u524d\uff0c\u5148\u5f15\u5165 ",(0,i.kt)("inlineCode",{parentName:"p"},"context")," \u3002SpanContext \u4fdd\u5b58\u4e86\u5206\u5e03\u5f0f\u8ffd\u8e2a\u7684\u4e0a\u4e0b\u6587\u4fe1\u606f\uff0c\u5305\u62ec Trace id\uff0cSpan id \u4ee5\u53ca\u5176\u5b83\u9700\u8981\u4f20\u9012\u5230\u4e0b\u6e38\u7684\u5185\u5bb9\u3002OpenTracing \u7684\u5b9e\u73b0\u9700\u8981\u5c06 SpanContext \u901a\u8fc7\u67d0\u79cd\u534f\u8bae \u8fdb\u884c\u4f20\u9012\uff0c\u4ee5\u5c06\u4e0d\u540c\u8fdb\u7a0b\u4e2d\u7684 Span \u5173\u8054\u5230\u540c\u4e00\u4e2a Trace \u4e0a\u3002\u5bf9\u4e8e HTTP \u8bf7\u6c42\u6765\u8bf4\uff0cSpanContext \u4e00\u822c\u662f\u91c7\u7528 HTTP header \u8fdb\u884c\u4f20\u9012\u7684\u3002"),(0,i.kt)("p",null,"\u4e0b\u9762\u662f ",(0,i.kt)("inlineCode",{parentName:"p"},"go-zero")," \u9ed8\u8ba4\u5b9e\u73b0\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"spanContext")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-go"},"type spanContext struct {\n    traceId string      // TraceID \u8868\u793atracer\u7684\u5168\u5c40\u552f\u4e00ID\n    spanId  string      // SpanId \u6807\u793a\u5355\u4e2atrace\u4e2d\u67d0\u4e00\u4e2aspan\u7684\u552f\u4e00ID\uff0c\u5728trace\u4e2d\u552f\u4e00\n}\n")),(0,i.kt)("p",null,"\u540c\u65f6\u5f00\u53d1\u8005\u4e5f\u53ef\u4ee5\u5b9e\u73b0 ",(0,i.kt)("inlineCode",{parentName:"p"},"SpanContext")," \u63d0\u4f9b\u7684\u63a5\u53e3\u65b9\u6cd5\uff0c\u5b9e\u73b0\u81ea\u5df1\u7684\u4e0a\u4e0b\u6587\u4fe1\u606f\u4f20\u9012\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-go"},"type SpanContext interface {\n    TraceId() string                        // get TraceId\n    SpanId() string                         // get SpanId\n    Visit(fn func(key, val string) bool)    // \u81ea\u5b9a\u4e49\u64cd\u4f5cTraceId\uff0cSpanId\n}\n")),(0,i.kt)("h3",{id:"span"},"Span"),(0,i.kt)("p",null,"\u4e00\u4e2a REST \u8c03\u7528\u6216\u8005\u6570\u636e\u5e93\u64cd\u4f5c\u7b49\uff0c\u90fd\u53ef\u4ee5\u4f5c\u4e3a\u4e00\u4e2a ",(0,i.kt)("inlineCode",{parentName:"p"},"span")," \u3002 ",(0,i.kt)("inlineCode",{parentName:"p"},"span")," \u662f\u5206\u5e03\u5f0f\u8ffd\u8e2a\u7684\u6700\u5c0f\u8ddf\u8e2a\u5355\u4f4d\uff0c\u4e00\u4e2a Trace \u7531\u591a\u6bb5 Span \u7ec4\u6210\u3002\u8ffd\u8e2a\u4fe1\u606f\u5305\u542b\u5982\u4e0b\u4fe1\u606f\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-go"},"type Span struct {\n    ctx           spanContext       // \u4f20\u9012\u7684\u4e0a\u4e0b\u6587\n    serviceName   string            // \u670d\u52a1\u540d \n    operationName string            // \u64cd\u4f5c\n    startTime     time.Time         // \u5f00\u59cb\u65f6\u95f4\u6233\n    flag          string            // \u6807\u8bb0\u5f00\u542ftrace\u662f server \u8fd8\u662f client\n    children      int               // \u672c span fork\u51fa\u6765\u7684 childsnums\n}\n")),(0,i.kt)("p",null,"\u4ece ",(0,i.kt)("inlineCode",{parentName:"p"},"span")," \u7684\u5b9a\u4e49\u7ed3\u6784\u6765\u770b\uff1a\u5728\u5fae\u670d\u52a1\u4e2d\uff0c \u8fd9\u5c31\u662f\u4e00\u4e2a\u5b8c\u6574\u7684\u5b50\u8c03\u7528\u8fc7\u7a0b\uff0c\u6709\u8c03\u7528\u5f00\u59cb ",(0,i.kt)("inlineCode",{parentName:"p"},"startTime")," \uff0c\u6709\u6807\u8bb0\u81ea\u5df1\u552f\u4e00\u5c5e\u6027\u7684\u4e0a\u4e0b\u6587\u7ed3\u6784 ",(0,i.kt)("inlineCode",{parentName:"p"},"spanContext")," \u4ee5\u53ca fork \u7684\u5b50\u8282\u70b9\u6570\u3002"),(0,i.kt)("h2",{id:"\u5b9e\u4f8b\u5e94\u7528"},"\u5b9e\u4f8b\u5e94\u7528"),(0,i.kt)("p",null,"\u5728 ",(0,i.kt)("inlineCode",{parentName:"p"},"go-zero")," \u4e2dhttp\uff0crpc\u4e2d\u5df2\u7ecf\u4f5c\u4e3a\u5185\u7f6e\u4e2d\u95f4\u4ef6\u96c6\u6210\u3002\u6211\u4eec\u4ee5 ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/zeromicro/go-zero/blob/master/rest/handler/tracinghandler.go"},"http")," \uff0c",(0,i.kt)("a",{parentName:"p",href:"https://github.com/zeromicro/go-zero/blob/master/zrpc/internal/clientinterceptors/tracinginterceptor.go"},"rpc")," \u4e2d\uff0c\u770b\u770b ",(0,i.kt)("inlineCode",{parentName:"p"},"tracing")," \u662f\u600e\u4e48\u4f7f\u7528\u7684\uff1a"),(0,i.kt)("h3",{id:"http"},"HTTP"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-go"},'func TracingHandler(next http.Handler) http.Handler {\n    return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {\n        // **1**\n        carrier, err := trace.Extract(trace.HttpFormat, r.Header)\n        // ErrInvalidCarrier means no trace id was set in http header\n        if err != nil && err != trace.ErrInvalidCarrier {\n            logx.Error(err)\n        }\n\n        // **2**\n        ctx, span := trace.StartServerSpan(r.Context(), carrier, sysx.Hostname(), r.RequestURI)\n        defer span.Finish()\n        // **5**\n        r = r.WithContext(ctx)\n\n        next.ServeHTTP(w, r)\n    })\n}\n\nfunc StartServerSpan(ctx context.Context, carrier Carrier, serviceName, operationName string) (\n    context.Context, tracespec.Trace) {\n    span := newServerSpan(carrier, serviceName, operationName)\n    // **4**\n    return context.WithValue(ctx, tracespec.TracingKey, span), span\n}\n\nfunc newServerSpan(carrier Carrier, serviceName, operationName string) tracespec.Trace {\n    // **3**\n    traceId := stringx.TakeWithPriority(func() string {\n        if carrier != nil {\n            return carrier.Get(traceIdKey)\n        }\n        return ""\n    }, func() string {\n        return stringx.RandId()\n    })\n    spanId := stringx.TakeWithPriority(func() string {\n        if carrier != nil {\n            return carrier.Get(spanIdKey)\n        }\n        return ""\n    }, func() string {\n        return initSpanId\n    })\n\n    return &Span{\n        ctx: spanContext{\n            traceId: traceId,\n            spanId:  spanId,\n        },\n        serviceName:   serviceName,\n        operationName: operationName,\n        startTime:     timex.Time(),\n        // \u6807\u8bb0\u4e3aserver\n        flag:          serverFlag,\n    }\n}\n')),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"\u5c06 header -> carrier\uff0c\u83b7\u53d6 header \u4e2d\u7684traceId\u7b49\u4fe1\u606f"),(0,i.kt)("li",{parentName:"ol"},"\u5f00\u542f\u4e00\u4e2a\u65b0\u7684 span\uff0c\u5e76\u628a",(0,i.kt)("strong",{parentName:"li"},"\u300ctraceId\uff0cspanId\u300d"),"\u5c01\u88c5\u5728context\u4e2d"),(0,i.kt)("li",{parentName:"ol"},"\u4ece\u4e0a\u8ff0\u7684 carrier\u300c\u4e5f\u5c31\u662fheader\u300d\u83b7\u53d6traceId\uff0cspanId",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"\u770bheader\u4e2d\u662f\u5426\u8bbe\u7f6e"),(0,i.kt)("li",{parentName:"ul"},"\u5982\u679c\u6ca1\u6709\u8bbe\u7f6e\uff0c\u5219\u968f\u673a\u751f\u6210\u8fd4\u56de"))),(0,i.kt)("li",{parentName:"ol"},"\u4ece ",(0,i.kt)("inlineCode",{parentName:"li"},"request")," \u4e2d\u4ea7\u751f\u65b0\u7684ctx\uff0c\u5e76\u5c06\u76f8\u5e94\u7684\u4fe1\u606f\u5c01\u88c5\u5728 ctx \u4e2d\uff0c\u8fd4\u56de"),(0,i.kt)("li",{parentName:"ol"},"\u4ece\u4e0a\u8ff0\u7684 context\uff0c\u62f7\u8d1d\u4e00\u4efd\u5230\u5f53\u524d\u7684 ",(0,i.kt)("inlineCode",{parentName:"li"},"request"))),(0,i.kt)("p",null,(0,i.kt)("img",{parentName:"p",src:"https://static.gocn.vip/photo/2020/a30daba2-ad12-477c-8ce5-131ef1cc3e76.png?x-oss-process=image/resize,w_1920",alt:null})),(0,i.kt)("p",null,"\u8fd9\u6837\u5c31\u5b9e\u73b0\u4e86 ",(0,i.kt)("inlineCode",{parentName:"p"},"span")," \u7684\u4fe1\u606f\u968f\u7740 ",(0,i.kt)("inlineCode",{parentName:"p"},"request")," \u4f20\u9012\u5230\u4e0b\u6e38\u670d\u52a1\u3002"),(0,i.kt)("h3",{id:"rpc"},"RPC"),(0,i.kt)("p",null,"\u5728 rpc \u4e2d\u5b58\u5728 ",(0,i.kt)("inlineCode",{parentName:"p"},"client, server")," \uff0c\u6240\u4ee5\u4ece ",(0,i.kt)("inlineCode",{parentName:"p"},"tracing")," \u4e0a\u4e5f\u6709 ",(0,i.kt)("inlineCode",{parentName:"p"},"clientTracing, serverTracing")," \u3002 ",(0,i.kt)("inlineCode",{parentName:"p"},"serveTracing")," \u7684\u903b\u8f91\u57fa\u672c\u4e0e http \u7684\u4e00\u81f4\uff0c\u6765\u770b\u770b ",(0,i.kt)("inlineCode",{parentName:"p"},"clientTracing")," \u662f\u600e\u4e48\u4f7f\u7528\u7684\uff1f"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-go"},"func TracingInterceptor(ctx context.Context, method string, req, reply interface{},\n    cc *grpc.ClientConn, invoker grpc.UnaryInvoker, opts ...grpc.CallOption) error {\n    // open clientSpan\n    ctx, span := trace.StartClientSpan(ctx, cc.Target(), method)\n    defer span.Finish()\n\n    var pairs []string\n    span.Visit(func(key, val string) bool {\n        pairs = append(pairs, key, val)\n        return true\n    })\n    // **3** \u5c06 pair \u4e2d\u7684data\u4ee5map\u7684\u5f62\u5f0f\u52a0\u5165 ctx\n    ctx = metadata.AppendToOutgoingContext(ctx, pairs...)\n\n    return invoker(ctx, method, req, reply, cc, opts...)\n}\n\nfunc StartClientSpan(ctx context.Context, serviceName, operationName string) (context.Context, tracespec.Trace) {\n    // **1**\n    if span, ok := ctx.Value(tracespec.TracingKey).(*Span); ok {\n        // **2**\n        return span.Fork(ctx, serviceName, operationName)\n    }\n\n    return ctx, emptyNoopSpan\n}\n")),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"\u83b7\u53d6\u4e0a\u6e38\u5e26\u4e0b\u6765\u7684 span \u4e0a\u4e0b\u6587\u4fe1\u606f"),(0,i.kt)("li",{parentName:"ol"},"\u4ece\u83b7\u53d6\u7684 span \u4e2d\u521b\u5efa\u65b0\u7684 ctx\uff0cspan\u300c\u7ee7\u627f\u7236span\u7684traceId\u300d"),(0,i.kt)("li",{parentName:"ol"},"\u5c06\u751f\u6210 span \u7684data\u52a0\u5165ctx\uff0c\u4f20\u9012\u5230\u4e0b\u4e00\u4e2a\u4e2d\u95f4\u4ef6\uff0c\u6d41\u81f3\u4e0b\u6e38")),(0,i.kt)("h2",{id:"\u603b\u7ed3"},"\u603b\u7ed3"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"go-zero")," \u901a\u8fc7\u62e6\u622a\u8bf7\u6c42\u83b7\u53d6\u94fe\u8deftraceID\uff0c\u7136\u540e\u5728\u4e2d\u95f4\u4ef6\u51fd\u6570\u5165\u53e3\u4f1a\u5206\u914d\u4e00\u4e2a\u6839Span\uff0c\u7136\u540e\u5728\u540e\u7eed\u64cd\u4f5c\u4e2d\u4f1a\u5206\u88c2\u51fa\u5b50Span\uff0c\u6bcf\u4e2aspan\u90fd\u6709\u81ea\u5df1\u7684\u5177\u4f53\u7684\u6807\u8bc6\uff0cFinsh\u4e4b\u540e\u5c31\u4f1a\u6c47\u96c6\u5728\u94fe\u8def\u8ffd\u8e2a\u7cfb\u7edf\u4e2d\u3002\u5f00\u53d1\u8005\u53ef\u4ee5\u901a\u8fc7 ",(0,i.kt)("inlineCode",{parentName:"p"},"ELK")," \u5de5\u5177\u8ffd\u8e2a ",(0,i.kt)("inlineCode",{parentName:"p"},"traceID")," \uff0c\u770b\u5230\u6574\u4e2a\u8c03\u7528\u94fe\u3002"),(0,i.kt)("p",null,"\u540c\u65f6 ",(0,i.kt)("inlineCode",{parentName:"p"},"go-zero")," \u5e76\u6ca1\u6709\u63d0\u4f9b\u6574\u5957 ",(0,i.kt)("inlineCode",{parentName:"p"},"trace")," \u94fe\u8def\u65b9\u6848\uff0c\u5f00\u53d1\u8005\u53ef\u4ee5\u5c01\u88c5 ",(0,i.kt)("inlineCode",{parentName:"p"},"go-zero")," \u5df2\u6709\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"span")," \u7ed3\u6784\uff0c\u505a\u81ea\u5df1\u7684\u4e0a\u62a5\u7cfb\u7edf\uff0c\u63a5\u5165 ",(0,i.kt)("inlineCode",{parentName:"p"},"jaeger, zipkin")," \u7b49\u94fe\u8def\u8ffd\u8e2a\u5de5\u5177\u3002"),(0,i.kt)("h2",{id:"\u53c2\u8003"},"\u53c2\u8003"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/zeromicro/go-zero/tree/master/core/trace"},"go-zero trace"))))}d.isMDXComponent=!0}}]);